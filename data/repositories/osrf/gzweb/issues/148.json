{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gzweb.json"}, "html": {"href": "#!/osrf/gzweb"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e2fc3f2-dc25-453b-9792-943c743d9b40}ts=1609263"}}, "type": "repository", "name": "gzweb", "full_name": "osrf/gzweb", "uuid": "{3e2fc3f2-dc25-453b-9792-943c743d9b40}"}, "links": {"attachments": {"href": "data/repositories/osrf/gzweb/issues/148/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gzweb/issues/148.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/148/watch"}, "comments": {"href": "data/repositories/osrf/gzweb/issues/148/comments_page=1.json"}, "html": {"href": "#!/osrf/gzweb/issues/148/errors-when-running-deploysh"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/148/vote"}}, "reporter": {"display_name": "Anthony Navarro", "uuid": "{6e6e7057-b627-4fd7-95c6-8396c13cd3df}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6e6e7057-b627-4fd7-95c6-8396c13cd3df%7D"}, "html": {"href": "https://bitbucket.org/%7B6e6e7057-b627-4fd7-95c6-8396c13cd3df%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/initials/AN-6.png"}}, "nickname": "anavarro42", "type": "user", "account_id": "557058:69ace313-aacd-4944-acdd-d64dfec8fcc6"}, "title": "Errors when running deploy.sh", "component": null, "votes": 0, "watches": 4, "content": {"raw": "I am attempting to get gzweb running for Ubuntu 16.04 in the cloud. I have also been testing on a native Linux machine to verify local functionality but getting the same results.\r\n\r\nI followed the instructions on http://gazebosim.org/tutorials?tut=gzweb_install and installed Gazebo with `curl -ssL http://get.gazebosim.org | sh`. I am able to get up to using the deploy.sh script until I get a failure. As I parse through it and run commands individually, I find errors on the following lines:\r\n\r\n`$DIR/node_modules/.bin/node-gyp configure`\r\nThis line causes errors with `const Hoek = require('hoek');` on line 5 in /home/helrot/gzweb/node_modules/boom/lib/index.js. I was able to get around this by downgrading node to 8.9.4 using nvm instead of the recommended 0.10.x.\r\n\r\n`$DIR/node_modules/.bin/node-gyp build -d`\r\nThis is the command that is causing many failures in GZNode.cc it appears. There are also problems with ignition and Gazebo, though Gazebo does run without issue. I have attached the output of running this command in buildFailure.txt.\r\n\r\nSeperately, I tried using a Docker image located at https://hub.docker.com/r/osrf/gazebo/~/dockerfile/ with some but not complete success. Basically could not access anything on ports 8080 or 7681. It had the following output\r\n\r\n\r\n```\r\ndocker run osrf/gazebo:gzweb8\r\n\r\n> gzweb@1.3.0 start /root/gzweb\r\n> if [ $npm_config_port ]; then port=$npm_config_port; fi; cd gzbridge && ./server.js $port\r\n\r\nGazebo multi-robot simulator, version 8.2.0\r\nCopyright (C) 2012 Open Source Robotics Foundation.\r\nReleased under the Apache 2 License.\r\nhttp://gazebosim.org\r\n\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 172.17.0.2\r\n[Err] [RenderEngine.cc:725] Can't open display:\r\n[Wrn] [RenderEngine.cc:93] Unable to create X window. Rendering will be disabled\r\n[Wrn] [RenderEngine.cc:293] Cannot initialize render engine since render path type is NONE. Ignore this warning ifrendering has been turned off on purpose.\r\n[Wrn] [ModelDatabase.cc:340] Getting models from[http://gazebosim.org/models/]. This may take a few seconds.\r\nTue Jan 23 2018 20:12:33 GMT+0000 (UTC) Static server listening on port: 8080\r\n--------------------------------------------------------------\r\nGazebo transport node connected to gzserver.\r\nPose message filter parameters between successive messages:\r\n  minimum seconds: 0.02\r\n  minimum XYZ distance squared: 0.00001\r\n  minimum Quartenion distance squared: 0.00001\r\n--------------------------------------------------------------\r\n```\r\n\r\n\r\nAny ideas? Here are the current versions I have on my native Linux install.\r\n\r\nUbuntu: 16.04\r\nGazebo: 8.2.0\r\nNode: 8.9.4 (also used 0.10.48)", "markup": "markdown", "html": "<p>I am attempting to get gzweb running for Ubuntu 16.04 in the cloud. I have also been testing on a native Linux machine to verify local functionality but getting the same results.</p>\n<p>I followed the instructions on <a href=\"http://gazebosim.org/tutorials?tut=gzweb_install\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/tutorials?tut=gzweb_install</a> and installed Gazebo with <code>curl -ssL http://get.gazebosim.org | sh</code>. I am able to get up to using the deploy.sh script until I get a failure. As I parse through it and run commands individually, I find errors on the following lines:</p>\n<p><code>$DIR/node_modules/.bin/node-gyp configure</code>\nThis line causes errors with <code>const Hoek = require('hoek');</code> on line 5 in /home/helrot/gzweb/node_modules/boom/lib/index.js. I was able to get around this by downgrading node to 8.9.4 using nvm instead of the recommended 0.10.x.</p>\n<p><code>$DIR/node_modules/.bin/node-gyp build -d</code>\nThis is the command that is causing many failures in GZNode.cc it appears. There are also problems with ignition and Gazebo, though Gazebo does run without issue. I have attached the output of running this command in buildFailure.txt.</p>\n<p>Seperately, I tried using a Docker image located at <a href=\"https://hub.docker.com/r/osrf/gazebo/~/dockerfile/\" rel=\"nofollow\" class=\"ap-connect-link\">https://hub.docker.com/r/osrf/gazebo/~/dockerfile/</a> with some but not complete success. Basically could not access anything on ports 8080 or 7681. It had the following output</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">docker</span> <span class=\"n\">run</span> <span class=\"n\">osrf</span><span class=\"o\">/</span><span class=\"nl\">gazebo</span><span class=\"p\">:</span><span class=\"n\">gzweb8</span>\n\n<span class=\"o\">&gt;</span> <span class=\"n\">gzweb</span><span class=\"mf\">@1.3.0</span> <span class=\"n\">start</span> <span class=\"o\">/</span><span class=\"n\">root</span><span class=\"o\">/</span><span class=\"n\">gzweb</span>\n<span class=\"o\">&gt;</span> <span class=\"k\">if</span> <span class=\"p\">[</span> <span class=\"err\">$</span><span class=\"n\">npm_config_port</span> <span class=\"p\">];</span> <span class=\"n\">then</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"err\">$</span><span class=\"n\">npm_config_port</span><span class=\"p\">;</span> <span class=\"n\">fi</span><span class=\"p\">;</span> <span class=\"n\">cd</span> <span class=\"n\">gzbridge</span> <span class=\"o\">&amp;&amp;</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">server</span><span class=\"p\">.</span><span class=\"n\">js</span> <span class=\"err\">$</span><span class=\"n\">port</span>\n\n<span class=\"n\">Gazebo</span> <span class=\"n\">multi</span><span class=\"o\">-</span><span class=\"n\">robot</span> <span class=\"n\">simulator</span><span class=\"p\">,</span> <span class=\"n\">version</span> <span class=\"mf\">8.2.0</span>\n<span class=\"n\">Copyright</span> <span class=\"p\">(</span><span class=\"n\">C</span><span class=\"p\">)</span> <span class=\"mi\">2012</span> <span class=\"n\">Open</span> <span class=\"n\">Source</span> <span class=\"n\">Robotics</span> <span class=\"n\">Foundation</span><span class=\"p\">.</span>\n<span class=\"n\">Released</span> <span class=\"n\">under</span> <span class=\"n\">the</span> <span class=\"n\">Apache</span> <span class=\"mi\">2</span> <span class=\"n\">License</span><span class=\"p\">.</span>\n<span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//gazebosim.org</span>\n\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Waiting</span> <span class=\"k\">for</span> <span class=\"n\">master</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Connected</span> <span class=\"n\">to</span> <span class=\"n\">gazebo</span> <span class=\"n\">master</span> <span class=\"p\">@</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//127.0.0.1:11345</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Publicized</span> <span class=\"nl\">address</span><span class=\"p\">:</span> <span class=\"mf\">172.17.0.2</span>\n<span class=\"p\">[</span><span class=\"n\">Err</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">725</span><span class=\"p\">]</span> <span class=\"n\">Can</span><span class=\"err\">&#39;</span><span class=\"n\">t</span> <span class=\"n\">open</span> <span class=\"nl\">display</span><span class=\"p\">:</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">93</span><span class=\"p\">]</span> <span class=\"n\">Unable</span> <span class=\"n\">to</span> <span class=\"n\">create</span> <span class=\"n\">X</span> <span class=\"n\">window</span><span class=\"p\">.</span> <span class=\"n\">Rendering</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">disabled</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">293</span><span class=\"p\">]</span> <span class=\"n\">Cannot</span> <span class=\"n\">initialize</span> <span class=\"n\">render</span> <span class=\"n\">engine</span> <span class=\"n\">since</span> <span class=\"n\">render</span> <span class=\"n\">path</span> <span class=\"n\">type</span> <span class=\"n\">is</span> <span class=\"n\">NONE</span><span class=\"p\">.</span> <span class=\"n\">Ignore</span> <span class=\"n\">this</span> <span class=\"n\">warning</span> <span class=\"n\">ifrendering</span> <span class=\"n\">has</span> <span class=\"n\">been</span> <span class=\"n\">turned</span> <span class=\"n\">off</span> <span class=\"n\">on</span> <span class=\"n\">purpose</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ModelDatabase</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">340</span><span class=\"p\">]</span> <span class=\"n\">Getting</span> <span class=\"n\">models</span> <span class=\"n\">from</span><span class=\"p\">[</span><span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//gazebosim.org/models/]. This may take a few seconds.</span>\n<span class=\"n\">Tue</span> <span class=\"n\">Jan</span> <span class=\"mi\">23</span> <span class=\"mi\">2018</span> <span class=\"mi\">20</span><span class=\"o\">:</span><span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"mi\">33</span> <span class=\"n\">GMT</span><span class=\"o\">+</span><span class=\"mo\">0000</span> <span class=\"p\">(</span><span class=\"n\">UTC</span><span class=\"p\">)</span> <span class=\"n\">Static</span> <span class=\"n\">server</span> <span class=\"n\">listening</span> <span class=\"n\">on</span> <span class=\"nl\">port</span><span class=\"p\">:</span> <span class=\"mi\">8080</span>\n<span class=\"o\">--------------------------------------------------------------</span>\n<span class=\"n\">Gazebo</span> <span class=\"n\">transport</span> <span class=\"n\">node</span> <span class=\"n\">connected</span> <span class=\"n\">to</span> <span class=\"n\">gzserver</span><span class=\"p\">.</span>\n<span class=\"n\">Pose</span> <span class=\"n\">message</span> <span class=\"n\">filter</span> <span class=\"n\">parameters</span> <span class=\"n\">between</span> <span class=\"n\">successive</span> <span class=\"nl\">messages</span><span class=\"p\">:</span>\n  <span class=\"n\">minimum</span> <span class=\"nl\">seconds</span><span class=\"p\">:</span> <span class=\"mf\">0.02</span>\n  <span class=\"n\">minimum</span> <span class=\"n\">XYZ</span> <span class=\"n\">distance</span> <span class=\"nl\">squared</span><span class=\"p\">:</span> <span class=\"mf\">0.00001</span>\n  <span class=\"n\">minimum</span> <span class=\"n\">Quartenion</span> <span class=\"n\">distance</span> <span class=\"nl\">squared</span><span class=\"p\">:</span> <span class=\"mf\">0.00001</span>\n<span class=\"o\">--------------------------------------------------------------</span>\n</pre></div>\n\n\n<p>Any ideas? Here are the current versions I have on my native Linux install.</p>\n<p>Ubuntu: 16.04\nGazebo: 8.2.0\nNode: 8.9.4 (also used 0.10.48)</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": null, "edited_on": null, "created_on": "2018-01-23T21:30:41.190576+00:00", "milestone": null, "updated_on": "2019-07-19T17:29:22.118245+00:00", "type": "issue", "id": 148}