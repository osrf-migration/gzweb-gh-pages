{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gzweb.json"}, "html": {"href": "#!/osrf/gzweb"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e2fc3f2-dc25-453b-9792-943c743d9b40}ts=1609263"}}, "type": "repository", "name": "gzweb", "full_name": "osrf/gzweb", "uuid": "{3e2fc3f2-dc25-453b-9792-943c743d9b40}"}, "links": {"attachments": {"href": "data/repositories/osrf/gzweb/issues/48/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gzweb/issues/48.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/48/watch"}, "comments": {"href": "data/repositories/osrf/gzweb/issues/48/comments_page=1.json"}, "html": {"href": "#!/osrf/gzweb/issues/48/gz3dguiprototyperound-modifies-its-stats"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/48/vote"}}, "reporter": null, "title": "GZ3D.Gui.prototype.round modifies its stats argument", "component": null, "votes": 1, "watches": 4, "content": {"raw": "As you can see from this gzgui.js's excerpt, the round function modifies stats properties: \r\n\r\n~~~\r\nGZ3D.Gui.prototype.round = function(stats, isColor, decimals)\r\n{\r\n  if (typeof stats === 'number')\r\n  {\r\n    stats = this.roundNumber(stats, isColor, decimals);\r\n  }\r\n  else // array of numbers\r\n  {\r\n    stats = this.roundArray(stats, isColor, decimals);\r\n  }\r\n  return stats;\r\n};\r\n~~~\r\n\r\nFix proposal:\r\n\r\n~~~\r\nGZ3D.Gui.prototype.roundArray = function(stats, isColor, decimals)\r\n{ \r\n  var result = {}; \r\n  for (var key in stats)\r\n  {\r\n    if (stats.hasOwnProperty(key)) {\r\n      if (typeof stats[key] === 'number')\r\n      {\r\n        result[key] = this.roundNumber(stats[key], isColor, decimals);\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n~~~", "markup": "markdown", "html": "<p>As you can see from this gzgui.js's excerpt, the round function modifies stats properties: </p>\n<div class=\"codehilite\"><pre><span></span>GZ3D.Gui.prototype.round = function(stats, isColor, decimals)\n{\n  if (typeof stats === &#39;number&#39;)\n  {\n    stats = this.roundNumber(stats, isColor, decimals);\n  }\n  else // array of numbers\n  {\n    stats = this.roundArray(stats, isColor, decimals);\n  }\n  return stats;\n};\n</pre></div>\n\n\n<p>Fix proposal:</p>\n<div class=\"codehilite\"><pre><span></span>GZ3D.Gui.prototype.roundArray = function(stats, isColor, decimals)\n{ \n  var result = {}; \n  for (var key in stats)\n  {\n    if (stats.hasOwnProperty(key)) {\n      if (typeof stats[key] === &#39;number&#39;)\n      {\n        result[key] = this.roundNumber(stats[key], isColor, decimals);\n      }\n    }\n  }\n\n  return result;\n};\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2014-12-10T14:35:21.865794+00:00", "milestone": null, "updated_on": "2014-12-11T02:07:49.641775+00:00", "type": "issue", "id": 48}