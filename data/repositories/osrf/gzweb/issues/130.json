{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gzweb.json"}, "html": {"href": "#!/osrf/gzweb"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e2fc3f2-dc25-453b-9792-943c743d9b40}ts=1609263"}}, "type": "repository", "name": "gzweb", "full_name": "osrf/gzweb", "uuid": "{3e2fc3f2-dc25-453b-9792-943c743d9b40}"}, "links": {"attachments": {"href": "data/repositories/osrf/gzweb/issues/130/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gzweb/issues/130.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/130/watch"}, "comments": {"href": "data/repositories/osrf/gzweb/issues/130/comments_page=1.json"}, "html": {"href": "#!/osrf/gzweb/issues/130/ws_serverjs-crashes-when-running-with"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/130/vote"}}, "reporter": {"display_name": "Tully Foote", "uuid": "{3d90dbd4-b845-466f-b5bd-068566f7ff50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d90dbd4-b845-466f-b5bd-068566f7ff50%7D"}, "html": {"href": "https://bitbucket.org/%7B3d90dbd4-b845-466f-b5bd-068566f7ff50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/3bc6528f8fe1fef6b6ecc7312ee0cf04d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTF-2.png"}}, "nickname": "Tully Foote", "type": "user", "account_id": "557058:e2bf789f-2138-4a4e-ba39-3d618078e20b"}, "title": "ws_server.js crashes when running with nodejs 6.12", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I downgraded to 6.1 and it worked.\r\n\r\nI was using nodesource's apt repo to get 6.11 https://deb.nodesource.com/node_6.x/ on top of the gzweb8 docker image.\r\n\r\n```\r\n#!bash\r\n\r\nroot@snowman:~/gzweb/gzbridge# ./ws_server.js \r\nmodule.js:568\r\n  return process.dlopen(module, path._makeLong(filename));\r\n                 ^\r\n\r\nError: Module version mismatch. Expected 48, got 46.\r\n    at Error (native)\r\n    at Object.Module._extensions..node (module.js:568:18)\r\n    at Module.load (module.js:456:32)\r\n    at tryModuleLoad (module.js:415:12)\r\n    at Function.Module._load (module.js:407:3)\r\n    at Module.require (module.js:466:17)\r\n    at require (internal/module.js:20:19)\r\n    at Object.<anonymous> (/root/gzweb/gzbridge/ws_server.js:8:13)\r\n    at Module._compile (module.js:541:32)\r\n    at Object.Module._extensions..js (module.js:550:10)\r\n\r\n```", "markup": "markdown", "html": "<p>I downgraded to 6.1 and it worked.</p>\n<p>I was using nodesource's apt repo to get 6.11 <a href=\"https://deb.nodesource.com/node_6.x/\" rel=\"nofollow\" class=\"ap-connect-link\">https://deb.nodesource.com/node_6.x/</a> on top of the gzweb8 docker image.</p>\n<div class=\"codehilite language-bash\"><pre><span></span>root@snowman:~/gzweb/gzbridge# ./ws_server.js \nmodule.js:568\n  <span class=\"k\">return</span> process.dlopen<span class=\"o\">(</span>module, path._makeLong<span class=\"o\">(</span>filename<span class=\"o\">))</span><span class=\"p\">;</span>\n                 ^\n\nError: Module version mismatch. Expected <span class=\"m\">48</span>, got <span class=\"m\">46</span>.\n    at Error <span class=\"o\">(</span>native<span class=\"o\">)</span>\n    at Object.Module._extensions..node <span class=\"o\">(</span>module.js:568:18<span class=\"o\">)</span>\n    at Module.load <span class=\"o\">(</span>module.js:456:32<span class=\"o\">)</span>\n    at tryModuleLoad <span class=\"o\">(</span>module.js:415:12<span class=\"o\">)</span>\n    at Function.Module._load <span class=\"o\">(</span>module.js:407:3<span class=\"o\">)</span>\n    at Module.require <span class=\"o\">(</span>module.js:466:17<span class=\"o\">)</span>\n    at require <span class=\"o\">(</span>internal/module.js:20:19<span class=\"o\">)</span>\n    at Object.&lt;anonymous&gt; <span class=\"o\">(</span>/root/gzweb/gzbridge/ws_server.js:8:13<span class=\"o\">)</span>\n    at Module._compile <span class=\"o\">(</span>module.js:541:32<span class=\"o\">)</span>\n    at Object.Module._extensions..js <span class=\"o\">(</span>module.js:550:10<span class=\"o\">)</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "invalid", "version": null, "edited_on": null, "created_on": "2017-11-14T02:32:23.731636+00:00", "milestone": null, "updated_on": "2017-11-14T02:37:55.993269+00:00", "type": "issue", "id": 130}