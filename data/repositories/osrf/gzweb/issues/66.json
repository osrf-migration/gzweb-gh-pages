{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gzweb.json"}, "html": {"href": "#!/osrf/gzweb"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e2fc3f2-dc25-453b-9792-943c743d9b40}ts=1609263"}}, "type": "repository", "name": "gzweb", "full_name": "osrf/gzweb", "uuid": "{3e2fc3f2-dc25-453b-9792-943c743d9b40}"}, "links": {"attachments": {"href": "data/repositories/osrf/gzweb/issues/66/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gzweb/issues/66.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/66/watch"}, "comments": {"href": "data/repositories/osrf/gzweb/issues/66/comments_page=1.json"}, "html": {"href": "#!/osrf/gzweb/issues/66/configurable-cameraview-init-pose"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/66/vote"}}, "reporter": {"display_name": "Isaac Saito", "uuid": "{7ebec088-7c5d-41ea-83c4-ea79199d7afd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7ebec088-7c5d-41ea-83c4-ea79199d7afd%7D"}, "html": {"href": "https://bitbucket.org/%7B7ebec088-7c5d-41ea-83c4-ea79199d7afd%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/bba6946e152d9901aae85811078822bfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsIS-1.png"}}, "nickname": "130s", "type": "user", "account_id": "557058:aa02a07f-577d-4331-9a3b-aa7da6d8edd3"}, "title": "Configurable cameraview init pose", "component": null, "votes": 3, "watches": 4, "content": {"raw": "In `.world` file we can define the cameraview's init pose like this, which `Gzweb` 1.2.0 seems to be ignoring for me.\r\n\r\n```\r\n     </scene>\r\n+    <gui>\r\n+     <camera name=\"camera_world_main\">\r\n+       <pose>57 15 1 0 0.05 1.4</pose>\r\n+     </camera>\r\n+    </gui>\r\n   </world>\r\n```\r\n\r\nManually chaging `gzweb/http/client/gz3d.js` like below works.\r\n\r\n```\r\n  // camera\r\n  this.camera = new THREE.PerspectiveCamera(\r\n      60, window.innerWidth / window.innerHeight, 0.1, 1000 );\r\n- this.defaultCameraPosition = new THREE.Vector3(0, -5, 5);\r\n+ this.defaultCameraPosition = new THREE.Vector3(57, 15, 1);\r\n  this.resetView();\r\n```\r\n```\r\nGZ3D.Scene.prototype.resetView = function()\r\n{\r\n  this.camera.position.copy(this.defaultCameraPosition);\r\n  this.camera.up = new THREE.Vector3(0, 0, 1);\r\n- this.camera.lookAt(new THREE.Vector3( 0, 0, 0 ));\r\n+ this.camera.lookAt(new THREE.Vector3( 62, 22, 0 ));\r\n  this.camera.updateMatrix();\r\n};\r\n```\r\n\r\nStill, this `resetView` isn't effective when the web page is reloaded. Pressing `Reset View` button on Gzweb works.\r\n\r\nSo in summary, issues I'm seeing:\r\n\r\n1) `camera` tag in SDF is ignored.\r\n2) `resetView` in `gzweb/http/client/gz3d.js` does not work when the Gzweb web page is loaded.", "markup": "markdown", "html": "<p>In <code>.world</code> file we can define the cameraview's init pose like this, which <code>Gzweb</code> 1.2.0 seems to be ignoring for me.</p>\n<div class=\"codehilite\"><pre><span></span>     <span class=\"nt\">&lt;/scene&gt;</span>\n+    <span class=\"nt\">&lt;gui&gt;</span>\n+     <span class=\"nt\">&lt;camera</span> <span class=\"na\">name=</span><span class=\"s\">&quot;camera_world_main&quot;</span><span class=\"nt\">&gt;</span>\n+       <span class=\"nt\">&lt;pose&gt;</span>57 15 1 0 0.05 1.4<span class=\"nt\">&lt;/pose&gt;</span>\n+     <span class=\"nt\">&lt;/camera&gt;</span>\n+    <span class=\"nt\">&lt;/gui&gt;</span>\n   <span class=\"nt\">&lt;/world&gt;</span>\n</pre></div>\n\n\n<p>Manually chaging <code>gzweb/http/client/gz3d.js</code> like below works.</p>\n<div class=\"codehilite\"><pre><span></span>  // camera\n  this.camera = new THREE.PerspectiveCamera(\n      60, window.innerWidth / window.innerHeight, 0.1, 1000 );\n- this.defaultCameraPosition = new THREE.Vector3(0, -5, 5);\n+ this.defaultCameraPosition = new THREE.Vector3(57, 15, 1);\n  this.resetView();\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>GZ3D.Scene.prototype.resetView = function()\n{\n  this.camera.position.copy(this.defaultCameraPosition);\n  this.camera.up = new THREE.Vector3(0, 0, 1);\n- this.camera.lookAt(new THREE.Vector3( 0, 0, 0 ));\n+ this.camera.lookAt(new THREE.Vector3( 62, 22, 0 ));\n  this.camera.updateMatrix();\n};\n</pre></div>\n\n\n<p>Still, this <code>resetView</code> isn't effective when the web page is reloaded. Pressing <code>Reset View</code> button on Gzweb works.</p>\n<p>So in summary, issues I'm seeing:</p>\n<p>1) <code>camera</code> tag in SDF is ignored.\n2) <code>resetView</code> in <code>gzweb/http/client/gz3d.js</code> does not work when the Gzweb web page is loaded.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2015-04-15T15:05:18.481976+00:00", "milestone": null, "updated_on": "2019-08-01T14:00:48.644627+00:00", "type": "issue", "id": 66}