{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gzweb.json"}, "html": {"href": "#!/osrf/gzweb"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e2fc3f2-dc25-453b-9792-943c743d9b40}ts=1609263"}}, "type": "repository", "name": "gzweb", "full_name": "osrf/gzweb", "uuid": "{3e2fc3f2-dc25-453b-9792-943c743d9b40}"}, "links": {"attachments": {"href": "data/repositories/osrf/gzweb/issues/156/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gzweb/issues/156.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/156/watch"}, "comments": {"href": "data/repositories/osrf/gzweb/issues/156/comments_page=1.json"}, "html": {"href": "#!/osrf/gzweb/issues/156/gazebo-9-gzweb-default-node-v426"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gzweb/issues/156/vote"}}, "reporter": {"display_name": "Marco Antonio Arruda", "uuid": "{50396ddb-0406-4fed-b384-e8b76fff5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B50396ddb-0406-4fed-b384-e8b76fff5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B50396ddb-0406-4fed-b384-e8b76fff5af2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:793a2ed9-5e1b-4e28-ba50-96b16e75ab8a/663849da-d11d-4ed1-b654-b59abeef187f/128"}}, "nickname": "marcoarruda", "type": "user", "account_id": "557058:793a2ed9-5e1b-4e28-ba50-96b16e75ab8a"}, "title": "Gazebo 9 + gzweb default + node v4.2.6", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Hi, I'm trying to deploy gzweb latest version with ROS kinetic and gazebo 9 installed, but I'm getting the following error message after the deploy process:\r\n\r\n```\r\nScanning dependencies of target gzcoarse\r\n[ 50%] Building CXX object tools/CMakeFiles/gzcoarse.dir/gzcoarse.cc.o\r\n[100%] Linking CXX executable gzcoarse\r\n/usr/bin/ld: warning: libsdformat.so.4, needed by /usr/local/lib/libgazebo_common.so, not found (try using -rpath or -rpath-link)\r\n/usr/local/lib/libgazebo_common.so: undefined reference to `sdf::Element::HasElementDescription(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n/usr/local/lib/libgazebo_common.so: undefined reference to `sdf::Element::GetAttribute(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\ncollect2: error: ld returned 1 exit status\r\ntools/CMakeFiles/gzcoarse.dir/build.make:150: recipe for target 'tools/gzcoarse' failed\r\nmake[2]: *** [tools/gzcoarse] Error 1\r\nCMakeFiles/Makefile2:135: recipe for target 'tools/CMakeFiles/gzcoarse.dir/all' failed\r\nmake[1]: *** [tools/CMakeFiles/gzcoarse.dir/all] Error 2\r\nMakefile:116: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\nmake: Entering directory '/home/ubuntu/gzweb/gzbridge/build'\r\n  CXX(target) Debug/obj.target/gzbridge/GZNode.o\r\n  CXX(target) Debug/obj.target/gzbridge/GazeboInterface.o\r\n  CXX(target) Debug/obj.target/gzbridge/pb2json.o\r\n  CXX(target) Debug/obj.target/gzbridge/ConfigLoader.o\r\n  CXX(target) Debug/obj.target/gzbridge/OgreMaterialParser.o\r\n  SOLINK_MODULE(target) Debug/obj.target/gzbridge.node\r\n  COPY Debug/gzbridge.node\r\nmake: Leaving directory '/home/ubuntu/gzweb/gzbridge/build'\r\nNot cloning the model repo\r\nDone\r\n```\r\n\r\nAnd if I try `npm start`:\r\n\r\n```\r\n> gzweb@1.3.0 start /home/ubuntu/gzweb\r\n> if [ $npm_config_port ]; then port=$npm_config_port; fi; cd gzbridge && ./server.js $port\r\n\r\nmodule.js:435\r\n  return process.dlopen(module, path._makeLong(filename));\r\n                 ^\r\n\r\nError: libsdformat.so.4: cannot open shared object file: No such file or directory\r\n    at Error (native)\r\n    at Object.Module._extensions..node (module.js:435:18)\r\n    at Module.load (module.js:344:32)\r\n    at Function.Module._load (module.js:301:12)\r\n    at Module.require (module.js:354:17)\r\n    at require (internal/module.js:12:17)\r\n    at Object.<anonymous> (/home/ubuntu/gzweb/gzbridge/server.js:9:18)\r\n    at Module._compile (module.js:410:26)\r\n    at Object.Module._extensions..js (module.js:417:10)\r\n    at Module.load (module.js:344:32)\r\n```\r\n\r\nBut if I try to install `libsdformat4`, it needs to remove gazebo 9 pkgs and dependencies.\r\n\r\n```\r\nThe following packages will be REMOVED:\r\n  gazebo9 gazebo9-plugin-base libgazebo9 libgazebo9-dev libsdformat6 libsdformat6-dev ros-kinetic-gazebo9-dev ros-kinetic-gazebo9-plugins ros-kinetic-gazebo9-ros ros-kinetic-gazebo9-ros-control\r\n  ros-kinetic-gazebo9-ros-pkgs\r\n```\r\n\r\nIs gzweb compatible with gazebo 9? Maybe I'm doing something wrong along the configuration process.\r\nThanks!", "markup": "markdown", "html": "<p>Hi, I'm trying to deploy gzweb latest version with ROS kinetic and gazebo 9 installed, but I'm getting the following error message after the deploy process:</p>\n<div class=\"codehilite\"><pre><span></span>Scanning dependencies of target gzcoarse\n[ 50%] Building CXX object tools/CMakeFiles/gzcoarse.dir/gzcoarse.cc.o\n[100%] Linking CXX executable gzcoarse\n/usr/bin/ld: warning: libsdformat.so.4, needed by /usr/local/lib/libgazebo_common.so, not found (try using -rpath or -rpath-link)\n/usr/local/lib/libgazebo_common.so: undefined reference to `sdf::Element::HasElementDescription(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)&#39;\n/usr/local/lib/libgazebo_common.so: undefined reference to `sdf::Element::GetAttribute(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)&#39;\ncollect2: error: ld returned 1 exit status\ntools/CMakeFiles/gzcoarse.dir/build.make:150: recipe for target &#39;tools/gzcoarse&#39; failed\nmake[2]: *** [tools/gzcoarse] Error 1\nCMakeFiles/Makefile2:135: recipe for target &#39;tools/CMakeFiles/gzcoarse.dir/all&#39; failed\nmake[1]: *** [tools/CMakeFiles/gzcoarse.dir/all] Error 2\nMakefile:116: recipe for target &#39;all&#39; failed\nmake: *** [all] Error 2\nmake: Entering directory &#39;/home/ubuntu/gzweb/gzbridge/build&#39;\n  CXX(target) Debug/obj.target/gzbridge/GZNode.o\n  CXX(target) Debug/obj.target/gzbridge/GazeboInterface.o\n  CXX(target) Debug/obj.target/gzbridge/pb2json.o\n  CXX(target) Debug/obj.target/gzbridge/ConfigLoader.o\n  CXX(target) Debug/obj.target/gzbridge/OgreMaterialParser.o\n  SOLINK_MODULE(target) Debug/obj.target/gzbridge.node\n  COPY Debug/gzbridge.node\nmake: Leaving directory &#39;/home/ubuntu/gzweb/gzbridge/build&#39;\nNot cloning the model repo\nDone\n</pre></div>\n\n\n<p>And if I try <code>npm start</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"o\">&gt;</span> <span class=\"n\">gzweb</span><span class=\"mf\">@1.3.0</span> <span class=\"n\">start</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ubuntu</span><span class=\"o\">/</span><span class=\"n\">gzweb</span>\n<span class=\"o\">&gt;</span> <span class=\"k\">if</span> <span class=\"p\">[</span> <span class=\"err\">$</span><span class=\"n\">npm_config_port</span> <span class=\"p\">];</span> <span class=\"n\">then</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"err\">$</span><span class=\"n\">npm_config_port</span><span class=\"p\">;</span> <span class=\"n\">fi</span><span class=\"p\">;</span> <span class=\"n\">cd</span> <span class=\"n\">gzbridge</span> <span class=\"o\">&amp;&amp;</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">server</span><span class=\"p\">.</span><span class=\"n\">js</span> <span class=\"err\">$</span><span class=\"n\">port</span>\n\n<span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">435</span>\n  <span class=\"k\">return</span> <span class=\"n\">process</span><span class=\"p\">.</span><span class=\"n\">dlopen</span><span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">,</span> <span class=\"n\">path</span><span class=\"p\">.</span><span class=\"n\">_makeLong</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">));</span>\n                 <span class=\"o\">^</span>\n\n<span class=\"nl\">Error</span><span class=\"p\">:</span> <span class=\"n\">libsdformat</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.4</span><span class=\"o\">:</span> <span class=\"n\">cannot</span> <span class=\"n\">open</span> <span class=\"n\">shared</span> <span class=\"n\">object</span> <span class=\"nl\">file</span><span class=\"p\">:</span> <span class=\"n\">No</span> <span class=\"n\">such</span> <span class=\"n\">file</span> <span class=\"n\">or</span> <span class=\"n\">directory</span>\n    <span class=\"n\">at</span> <span class=\"n\">Error</span> <span class=\"p\">(</span><span class=\"n\">native</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object</span><span class=\"p\">.</span><span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">_extensions</span><span class=\"p\">..</span><span class=\"n\">node</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">435</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">load</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">344</span><span class=\"o\">:</span><span class=\"mi\">32</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Function</span><span class=\"p\">.</span><span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">_load</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">301</span><span class=\"o\">:</span><span class=\"mi\">12</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">require</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">354</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">require</span> <span class=\"p\">(</span><span class=\"n\">internal</span><span class=\"o\">/</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object</span><span class=\"p\">.</span><span class=\"o\">&lt;</span><span class=\"n\">anonymous</span><span class=\"o\">&gt;</span> <span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ubuntu</span><span class=\"o\">/</span><span class=\"n\">gzweb</span><span class=\"o\">/</span><span class=\"n\">gzbridge</span><span class=\"o\">/</span><span class=\"n\">server</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">_compile</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">410</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object</span><span class=\"p\">.</span><span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">_extensions</span><span class=\"p\">..</span><span class=\"n\">js</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">417</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Module</span><span class=\"p\">.</span><span class=\"n\">load</span> <span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">344</span><span class=\"o\">:</span><span class=\"mi\">32</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>But if I try to install <code>libsdformat4</code>, it needs to remove gazebo 9 pkgs and dependencies.</p>\n<div class=\"codehilite\"><pre><span></span>The following packages will be REMOVED:\n  gazebo9 gazebo9-plugin-base libgazebo9 libgazebo9-dev libsdformat6 libsdformat6-dev ros-kinetic-gazebo9-dev ros-kinetic-gazebo9-plugins ros-kinetic-gazebo9-ros ros-kinetic-gazebo9-ros-control\n  ros-kinetic-gazebo9-ros-pkgs\n</pre></div>\n\n\n<p>Is gzweb compatible with gazebo 9? Maybe I'm doing something wrong along the configuration process.\nThanks!</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-07-23T18:31:05.012983+00:00", "milestone": null, "updated_on": "2018-11-12T21:52:44.999746+00:00", "type": "issue", "id": 156}