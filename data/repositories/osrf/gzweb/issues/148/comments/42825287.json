{"links": {"self": {"href": "data/repositories/osrf/gzweb/issues/148/comments/42825287.json"}, "html": {"href": "#!/osrf/gzweb/issues/148#comment-42825287"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gzweb/issues/148.json"}}, "type": "issue", "id": 148, "repository": {"links": {"self": {"href": "data/repositories/osrf/gzweb.json"}, "html": {"href": "#!/osrf/gzweb"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e2fc3f2-dc25-453b-9792-943c743d9b40}ts=1609263"}}, "type": "repository", "name": "gzweb", "full_name": "osrf/gzweb", "uuid": "{3e2fc3f2-dc25-453b-9792-943c743d9b40}"}, "title": "Errors when running deploy.sh"}, "content": {"raw": "@iche033 I did have an issue with gazebo and the dev packages. That should be resolved now. I am getting a slew of errors again. I notice that it might still be using the wrong version of node even though the nodejs-legacy command did install 4*. I am going to try and change that with nvm, but in the meantime, here is the end of the output (minus all the errors complaining about files being generated by an older version of protoc).\n```\nIn file included from /usr/include/gazebo-8/gazebo/msgs/MessageTypes.hh:134:0,\n                 from /usr/include/gazebo-8/gazebo/msgs/msgs.hh:35,\n                 from ../GazeboInterface.hh:29,\n                 from ../GZNode.cc:21:\n/usr/include/gazebo-8/gazebo/msgs/wrench_stamped.pb.h:17:2: error: #error This file was generated by an older version of protoc which is\n #error This file was generated by an older version of protoc which is\n  ^\n/usr/include/gazebo-8/gazebo/msgs/wrench_stamped.pb.h:18:2: error: #error incompatible with your Protocol Buffer headers. Please\n #error incompatible with your Protocol Buffer headers.  Please\n  ^\n/usr/include/gazebo-8/gazebo/msgs/wrench_stamped.pb.h:19:2: error: #error regenerate this file with a newer version of protoc.\n #error regenerate this file with a newer version of protoc.\n  ^\ngzbridge.target.mk:109: recipe for target 'Debug/obj.target/gzbridge/GZNode.o' failed\nmake: *** [Debug/obj.target/gzbridge/GZNode.o] Error 1\nmake: Leaving directory '/root/gzweb/gzbridge/build'\ngyp ERR! build error\ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/root/gzweb/node_modules/node-gyp/lib/build.js:258:23)\ngyp ERR! stack     at emitTwo (events.js:126:13)\ngyp ERR! stack     at ChildProcess.emit (events.js:214:7)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:198:12)\ngyp ERR! System Linux 4.13.0-1006-gcp\ngyp ERR! command \"/usr/local/bin/node\" \"/root/gzweb/node_modules/.bin/node-gyp\" \"build\" \"-d\"\ngyp ERR! cwd /root/gzweb/gzbridge\ngyp ERR! node -v v8.9.0\ngyp ERR! node-gyp -v v3.6.2\ngyp ERR! not ok\nThere are node-gyp build errors, exiting.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! gzweb@1.3.0 deploy: `if [ $npm_config_deploy_op ]; then ./deploy.sh -$npm_config_deploy_op; else ./deploy.sh; fi;`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the gzweb@1.3.0 deploy script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2018-01-24T00_56_56_855Z-debug.log\n```", "markup": "markdown", "html": "<p>@iche033 I did have an issue with gazebo and the dev packages. That should be resolved now. I am getting a slew of errors again. I notice that it might still be using the wrong version of node even though the nodejs-legacy command did install 4*. I am going to try and change that with nvm, but in the meantime, here is the end of the output (minus all the errors complaining about files being generated by an older version of protoc).</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">In</span> <span class=\"n\">file</span> <span class=\"n\">included</span> <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">8</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">MessageTypes</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">134</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"p\">,</span>\n                 <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">8</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">35</span><span class=\"p\">,</span>\n                 <span class=\"n\">from</span> <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">GazeboInterface</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">29</span><span class=\"p\">,</span>\n                 <span class=\"n\">from</span> <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">GZNode</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">21</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">8</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">wrench_stamped</span><span class=\"p\">.</span><span class=\"n\">pb</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"nl\">error</span><span class=\"p\">:</span> <span class=\"err\">#</span><span class=\"n\">error</span> <span class=\"n\">This</span> <span class=\"n\">file</span> <span class=\"n\">was</span> <span class=\"n\">generated</span> <span class=\"n\">by</span> <span class=\"n\">an</span> <span class=\"n\">older</span> <span class=\"n\">version</span> <span class=\"n\">of</span> <span class=\"n\">protoc</span> <span class=\"n\">which</span> <span class=\"n\">is</span>\n <span class=\"cp\">#error This file was generated by an older version of protoc which is</span>\n  <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">8</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">wrench_stamped</span><span class=\"p\">.</span><span class=\"n\">pb</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">18</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"nl\">error</span><span class=\"p\">:</span> <span class=\"err\">#</span><span class=\"n\">error</span> <span class=\"n\">incompatible</span> <span class=\"n\">with</span> <span class=\"n\">your</span> <span class=\"n\">Protocol</span> <span class=\"n\">Buffer</span> <span class=\"n\">headers</span><span class=\"p\">.</span> <span class=\"n\">Please</span>\n <span class=\"cp\">#error incompatible with your Protocol Buffer headers.  Please</span>\n  <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">8</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">wrench_stamped</span><span class=\"p\">.</span><span class=\"n\">pb</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">19</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"nl\">error</span><span class=\"p\">:</span> <span class=\"err\">#</span><span class=\"n\">error</span> <span class=\"n\">regenerate</span> <span class=\"n\">this</span> <span class=\"n\">file</span> <span class=\"n\">with</span> <span class=\"n\">a</span> <span class=\"n\">newer</span> <span class=\"n\">version</span> <span class=\"n\">of</span> <span class=\"n\">protoc</span><span class=\"p\">.</span>\n <span class=\"cp\">#error regenerate this file with a newer version of protoc.</span>\n  <span class=\"o\">^</span>\n<span class=\"n\">gzbridge</span><span class=\"p\">.</span><span class=\"n\">target</span><span class=\"p\">.</span><span class=\"nl\">mk</span><span class=\"p\">:</span><span class=\"mi\">109</span><span class=\"o\">:</span> <span class=\"n\">recipe</span> <span class=\"k\">for</span> <span class=\"n\">target</span> <span class=\"err\">&#39;</span><span class=\"n\">Debug</span><span class=\"o\">/</span><span class=\"n\">obj</span><span class=\"p\">.</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">gzbridge</span><span class=\"o\">/</span><span class=\"n\">GZNode</span><span class=\"p\">.</span><span class=\"n\">o</span><span class=\"err\">&#39;</span> <span class=\"n\">failed</span>\n<span class=\"nl\">make</span><span class=\"p\">:</span> <span class=\"o\">***</span> <span class=\"p\">[</span><span class=\"n\">Debug</span><span class=\"o\">/</span><span class=\"n\">obj</span><span class=\"p\">.</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">gzbridge</span><span class=\"o\">/</span><span class=\"n\">GZNode</span><span class=\"p\">.</span><span class=\"n\">o</span><span class=\"p\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">1</span>\n<span class=\"nl\">make</span><span class=\"p\">:</span> <span class=\"n\">Leaving</span> <span class=\"n\">directory</span> <span class=\"err\">&#39;</span><span class=\"o\">/</span><span class=\"n\">root</span><span class=\"o\">/</span><span class=\"n\">gzweb</span><span class=\"o\">/</span><span class=\"n\">gzbridge</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"err\">&#39;</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">build</span> <span class=\"n\">error</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">stack</span> <span class=\"nl\">Error</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"n\">make</span><span class=\"err\">`</span> <span class=\"n\">failed</span> <span class=\"n\">with</span> <span class=\"n\">exit</span> <span class=\"nl\">code</span><span class=\"p\">:</span> <span class=\"mi\">2</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">stack</span>     <span class=\"n\">at</span> <span class=\"n\">ChildProcess</span><span class=\"p\">.</span><span class=\"n\">onExit</span> <span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">root</span><span class=\"o\">/</span><span class=\"n\">gzweb</span><span class=\"o\">/</span><span class=\"n\">node_modules</span><span class=\"o\">/</span><span class=\"n\">node</span><span class=\"o\">-</span><span class=\"n\">gyp</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">258</span><span class=\"o\">:</span><span class=\"mi\">23</span><span class=\"p\">)</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">stack</span>     <span class=\"n\">at</span> <span class=\"n\">emitTwo</span> <span class=\"p\">(</span><span class=\"n\">events</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">126</span><span class=\"o\">:</span><span class=\"mi\">13</span><span class=\"p\">)</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">stack</span>     <span class=\"n\">at</span> <span class=\"n\">ChildProcess</span><span class=\"p\">.</span><span class=\"n\">emit</span> <span class=\"p\">(</span><span class=\"n\">events</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">214</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"p\">)</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">stack</span>     <span class=\"n\">at</span> <span class=\"n\">Process</span><span class=\"p\">.</span><span class=\"n\">ChildProcess</span><span class=\"p\">.</span><span class=\"n\">_handle</span><span class=\"p\">.</span><span class=\"n\">onexit</span> <span class=\"p\">(</span><span class=\"n\">internal</span><span class=\"o\">/</span><span class=\"n\">child_process</span><span class=\"p\">.</span><span class=\"nl\">js</span><span class=\"p\">:</span><span class=\"mi\">198</span><span class=\"o\">:</span><span class=\"mi\">12</span><span class=\"p\">)</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">System</span> <span class=\"n\">Linux</span> <span class=\"mf\">4.13.0</span><span class=\"o\">-</span><span class=\"mi\">1006</span><span class=\"o\">-</span><span class=\"n\">gcp</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">command</span> <span class=\"s\">&quot;/usr/local/bin/node&quot;</span> <span class=\"s\">&quot;/root/gzweb/node_modules/.bin/node-gyp&quot;</span> <span class=\"s\">&quot;build&quot;</span> <span class=\"s\">&quot;-d&quot;</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">cwd</span> <span class=\"o\">/</span><span class=\"n\">root</span><span class=\"o\">/</span><span class=\"n\">gzweb</span><span class=\"o\">/</span><span class=\"n\">gzbridge</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">node</span> <span class=\"o\">-</span><span class=\"n\">v</span> <span class=\"n\">v8</span><span class=\"mf\">.9.0</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">node</span><span class=\"o\">-</span><span class=\"n\">gyp</span> <span class=\"o\">-</span><span class=\"n\">v</span> <span class=\"n\">v3</span><span class=\"mf\">.6.2</span>\n<span class=\"n\">gyp</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">not</span> <span class=\"n\">ok</span>\n<span class=\"n\">There</span> <span class=\"n\">are</span> <span class=\"n\">node</span><span class=\"o\">-</span><span class=\"n\">gyp</span> <span class=\"n\">build</span> <span class=\"n\">errors</span><span class=\"p\">,</span> <span class=\"n\">exiting</span><span class=\"p\">.</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">code</span> <span class=\"n\">ELIFECYCLE</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">errno</span> <span class=\"mi\">1</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">gzweb</span><span class=\"mf\">@1.3.0</span> <span class=\"nl\">deploy</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"k\">if</span> <span class=\"p\">[</span> <span class=\"err\">$</span><span class=\"n\">npm_config_deploy_op</span> <span class=\"p\">];</span> <span class=\"n\">then</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">deploy</span><span class=\"p\">.</span><span class=\"n\">sh</span> <span class=\"o\">-</span><span class=\"err\">$</span><span class=\"n\">npm_config_deploy_op</span><span class=\"p\">;</span> <span class=\"k\">else</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">deploy</span><span class=\"p\">.</span><span class=\"n\">sh</span><span class=\"p\">;</span> <span class=\"n\">fi</span><span class=\"p\">;</span><span class=\"err\">`</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">Exit</span> <span class=\"n\">status</span> <span class=\"mi\">1</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">Failed</span> <span class=\"n\">at</span> <span class=\"n\">the</span> <span class=\"n\">gzweb</span><span class=\"mf\">@1.3.0</span> <span class=\"n\">deploy</span> <span class=\"n\">script</span><span class=\"p\">.</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">This</span> <span class=\"n\">is</span> <span class=\"n\">probably</span> <span class=\"n\">not</span> <span class=\"n\">a</span> <span class=\"n\">problem</span> <span class=\"n\">with</span> <span class=\"n\">npm</span><span class=\"p\">.</span> <span class=\"n\">There</span> <span class=\"n\">is</span> <span class=\"n\">likely</span> <span class=\"n\">additional</span> <span class=\"n\">logging</span> <span class=\"n\">output</span> <span class=\"n\">above</span><span class=\"p\">.</span>\n\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span> <span class=\"n\">A</span> <span class=\"n\">complete</span> <span class=\"n\">log</span> <span class=\"n\">of</span> <span class=\"n\">this</span> <span class=\"n\">run</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">found</span> <span class=\"k\">in</span><span class=\"o\">:</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"o\">!</span>     <span class=\"o\">/</span><span class=\"n\">root</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">npm</span><span class=\"o\">/</span><span class=\"n\">_logs</span><span class=\"o\">/</span><span class=\"mi\">2018</span><span class=\"o\">-</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"mi\">24</span><span class=\"n\">T00_56_56_855Z</span><span class=\"o\">-</span><span class=\"n\">debug</span><span class=\"p\">.</span><span class=\"n\">log</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-01-24T01:01:54.783109+00:00", "user": {"display_name": "Anthony Navarro", "uuid": "{6e6e7057-b627-4fd7-95c6-8396c13cd3df}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6e6e7057-b627-4fd7-95c6-8396c13cd3df%7D"}, "html": {"href": "https://bitbucket.org/%7B6e6e7057-b627-4fd7-95c6-8396c13cd3df%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/initials/AN-6.png"}}, "nickname": "anavarro42", "type": "user", "account_id": "557058:69ace313-aacd-4944-acdd-d64dfec8fcc6"}, "updated_on": null, "type": "issue_comment", "id": 42825287}