{"links": {"self": {"href": "data/repositories/osrf/gzweb/pullrequests/149/comments/52941556.json"}, "html": {"href": "#!/osrf/gzweb/pull-requests/149/_/diff#comment-52941556"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 149, "links": {"self": {"href": "data/repositories/osrf/gzweb/pullrequests/149.json"}, "html": {"href": "#!/osrf/gzweb/pull-requests/149"}}, "title": "Continuing pull request #141 - SDF Viewer"}, "content": {"raw": "Most of pull request #141 has been merged as part of other pull requests! This PR is now down to the custom URLs functionality.\n\nOne thing which concerns me about this approach is that the full path to every resource must be added explicitly. I think we could try an alternative approach, which is closer to how Gazebo works, of adding resource paths instead.\n\nSo instead of doing this:\n\n~~~\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/model.sdf);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/rudder.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/right_flap.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/right_aileron.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/left_flap.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/left_aileron.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/elevators.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/cessna_rear_right_wheel.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/cessna_rear_left_wheel.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/cessna_prop.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/cessna_front_wheel.dae);\nsdfparser.addUrl(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/meshes/body.dae);\n~~~\n\nYou could do just this for example:\n\n~~~\nsdfparser.addPath(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/)\nsdfparser.load(https://api.ignitionfuel.org/1.0/models/57d63c5f-0fd7-4540-b045-33a0a361fa86/files/model.sdf);\n~~~\n\nGranted, this is not exactly like `GAZEBO_MODEL_PATH`, because the path given goes straight to the model root instead of the parent directory of all models, so we'd still need to add a separate path for each model. But given Ignition Fuel's URL format, I can't see a better way of handling this unless we reimplement [ignition-fuel-tools](https://bitbucket.org/ignitionrobotics/ign-fuel-tools) in Javascript :confused: ", "markup": "markdown", "html": "<p>Most of <a href=\"#!/osrf/gzweb/pull-requests/141/reusable-gzweb\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #141</a> has been merged as part of other pull requests! This PR is now down to the custom URLs functionality.</p>\n<p>One thing which concerns me about this approach is that the full path to every resource must be added explicitly. I think we could try an alternative approach, which is closer to how Gazebo works, of adding resource paths instead.</p>\n<p>So instead of doing this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">model</span><span class=\"p\">.</span><span class=\"nc\">sdf</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">rudder</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">right_flap</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">right_aileron</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">left_flap</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">left_aileron</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">elevators</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">cessna_rear_right_wheel</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">cessna_rear_left_wheel</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">cessna_prop</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">cessna_front_wheel</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addUrl</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">meshes</span><span class=\"o\">/</span><span class=\"nt\">body</span><span class=\"p\">.</span><span class=\"nc\">dae</span><span class=\"o\">);</span>\n</pre></div>\n\n\n<p>You could do just this for example:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">addPath</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/)</span>\n<span class=\"nt\">sdfparser</span><span class=\"p\">.</span><span class=\"nc\">load</span><span class=\"o\">(</span><span class=\"nt\">https</span><span class=\"o\">://</span><span class=\"nt\">api</span><span class=\"p\">.</span><span class=\"nc\">ignitionfuel</span><span class=\"p\">.</span><span class=\"nc\">org</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">models</span><span class=\"o\">/</span><span class=\"nt\">57d63c5f-0fd7-4540-b045-33a0a361fa86</span><span class=\"o\">/</span><span class=\"nt\">files</span><span class=\"o\">/</span><span class=\"nt\">model</span><span class=\"p\">.</span><span class=\"nc\">sdf</span><span class=\"o\">);</span>\n</pre></div>\n\n\n<p>Granted, this is not exactly like <code>GAZEBO_MODEL_PATH</code>, because the path given goes straight to the model root instead of the parent directory of all models, so we'd still need to add a separate path for each model. But given Ignition Fuel's URL format, I can't see a better way of handling this unless we reimplement <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-fuel-tools\" rel=\"nofollow\">ignition-fuel-tools</a> in Javascript <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f615.png\" alt=\"\ud83d\ude15\" title=\":confused:\" data-emoji-short-name=\":confused:\" /> </p>", "type": "rendered"}, "created_on": "2018-01-04T01:01:07.047003+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-01-04T01:01:07.049165+00:00", "type": "pullrequest_comment", "id": 52941556}