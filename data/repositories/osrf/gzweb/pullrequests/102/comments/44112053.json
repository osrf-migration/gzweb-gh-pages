{"links": {"self": {"href": "data/repositories/osrf/gzweb/pullrequests/102/comments/44112053.json"}, "html": {"href": "#!/osrf/gzweb/pull-requests/102/_/diff#comment-44112053"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 102, "links": {"self": {"href": "data/repositories/osrf/gzweb/pullrequests/102.json"}, "html": {"href": "#!/osrf/gzweb/pull-requests/102"}}, "title": "Threejs r86"}, "content": {"raw": "There is an error I get in the console log as soon as the gzweb page opens.\n\nIf there are models in the world before running gzweb, they don't appear.\n\nIf I spawn models in the world while gzweb is running they do appear.\n\nthe error appears every time a model is spawned.\n\ngzserver version 7.8.1\n\nUpdated:\n\n```\nUncaught TypeError: Cannot read property 'pose' of undefined\n    \n```\n```\n/**\n * Format stats message for proper display\n * @param {} stats\n * @returns {Object.<position, orientation, inertial, diffuse, specular, attenuation>}\n */\nGZ3D.Gui.prototype.formatStats = function(stats)\n{\n  var position, orientation;\n  var quat, rpy;\n  if (stats.pose)\n```\n```\nUncaught TypeError: Cannot read property 'pose' of undefined\n    at GZ3D.Gui.formatStats (gz3d.js:1993)\n    at GZ3D.Gui.setModelStats (gz3d.js:1684)\n    at GZ3D.GZIface.sceneUpdate (gz3d.js:2375)\n    at ROSLIB.Topic.<anonymous> (roslib.js:691)\n    at ROSLIB.Topic.EventEmitter.emit (eventemitter2.js:310)\n    at ROSLIB.Ros.<anonymous> (roslib.js:696)\n    at ROSLIB.Ros.EventEmitter.emit (eventemitter2.js:310)\n    at handleMessage (roslib.js:415)\n    at WebSocket.onMessage (roslib.js:427)\n```", "markup": "markdown", "html": "<p>There is an error I get in the console log as soon as the gzweb page opens.</p>\n<p>If there are models in the world before running gzweb, they don't appear.</p>\n<p>If I spawn models in the world while gzweb is running they do appear.</p>\n<p>the error appears every time a model is spawned.</p>\n<p>gzserver version 7.8.1</p>\n<p>Updated:</p>\n<div class=\"codehilite\"><pre><span></span>Uncaught TypeError: Cannot read property &#39;pose&#39; of undefined\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><span class=\"cm\">/**</span>\n<span class=\"cm\"> * Format stats message for proper display</span>\n<span class=\"cm\"> * @param {} stats</span>\n<span class=\"cm\"> * @returns {Object.&lt;position, orientation, inertial, diffuse, specular, attenuation&gt;}</span>\n<span class=\"cm\"> */</span><span class=\"w\"></span>\nGZ3D<span class=\"o\">.</span>Gui<span class=\"o\">.</span>prototype<span class=\"o\">.</span>formatStats<span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>function<span class=\"o\">(</span>stats<span class=\"o\">)</span><span class=\"w\"></span>\n<span class=\"err\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span>var<span class=\"w\"> </span>position<span class=\"o\">,</span><span class=\"w\"> </span>orientation<span class=\"err\">;</span><span class=\"w\"></span>\n<span class=\"w\">  </span>var<span class=\"w\"> </span>quat<span class=\"o\">,</span><span class=\"w\"> </span>rpy<span class=\"err\">;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"o\">(</span>stats<span class=\"o\">.</span>pose<span class=\"o\">)</span><span class=\"w\"></span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>Uncaught TypeError: Cannot read property &#39;pose&#39; of undefined\n    at GZ3D.Gui.formatStats (gz3d.js:1993)\n    at GZ3D.Gui.setModelStats (gz3d.js:1684)\n    at GZ3D.GZIface.sceneUpdate (gz3d.js:2375)\n    at ROSLIB.Topic.&lt;anonymous&gt; (roslib.js:691)\n    at ROSLIB.Topic.EventEmitter.emit (eventemitter2.js:310)\n    at ROSLIB.Ros.&lt;anonymous&gt; (roslib.js:696)\n    at ROSLIB.Ros.EventEmitter.emit (eventemitter2.js:310)\n    at handleMessage (roslib.js:415)\n    at WebSocket.onMessage (roslib.js:427)\n</pre></div>", "type": "rendered"}, "created_on": "2017-09-01T19:57:48.904883+00:00", "user": {"display_name": "Mohamd Ayman", "uuid": "{72e87935-5983-4f36-8505-0c88a6493930}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B72e87935-5983-4f36-8505-0c88a6493930%7D"}, "html": {"href": "https://bitbucket.org/%7B72e87935-5983-4f36-8505-0c88a6493930%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:53a1879d-b572-46c9-97d3-8fa52b2ff8a7/d5d765e0-f86b-4c0d-93ed-c67429f1f465/128"}}, "nickname": "Mohamd Ayman", "type": "user", "account_id": "557058:53a1879d-b572-46c9-97d3-8fa52b2ff8a7"}, "updated_on": "2017-09-01T20:18:56.637594+00:00", "type": "pullrequest_comment", "id": 44112053}